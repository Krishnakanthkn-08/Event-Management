<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Resource Utilisation Report</title>

    <style>
   
    body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background: #f5f5f5;
    }

    h2, h3 {
        text-align: center;
        margin-bottom: 15px;
    }

    form {
        text-align: center;
        margin-bottom: 25px;
    }

    label {
        font-weight: bold;
    }

    input[type="datetime-local"] {
        padding: 8px;
        font-size: 16px;
        width: 220px;
    }

    button {
        padding: 10px 20px;
        font-size: 16px;
        background: black;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }
    button:hover {
        background: #333;
    }


    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        background: white;
    }

    table th {
        background: #222;
        color: white;
        padding: 10px;
        font-size: 17px;
        text-align: center;
    }

    table td {
        padding: 10px;
        text-align: center;
        font-size: 16px;
        border-bottom: 1px solid #ccc;
    }

    table tr:nth-child(even) {
        background: #f2f2f2;
    }

  a.btn {
    display: block;          
    width: fit-content;      
    margin: 25px auto;        
    padding: 10px 16px;
    background: #222;
    color: #fff;
    text-decoration: none;
    border-radius: 5px;
}
a.btn:hover {
    background: #444;
}

    </style>
</head>

<body>

<h2>Resource Utilisation Report</h2>

<form method="POST">
    <label>Start Date & Time:</label><br>
    <input type="datetime-local" name="start" required>
    <br><br>

    <label>End Date & Time:</label><br>
    <input type="datetime-local" name="end" required>
    <br><br>

    <button type="submit">Generate Report</button>
</form>

<br><br>

{% if utilisation %}

<h2>Total Hours Utilised</h2>

<table>
    <tr>
        <th>Resource</th>
        <th>Total Hours Used (Within Range)</th>
    </tr>

    {% for r in utilisation %}
    <tr>
        <td>{{ r.resource_name }}</td>
        <td>{{ r.total_hours if r.total_hours else 0 }}</td>
    </tr>
    {% endfor %}
</table>

<br>

<h3>Bookings Within Selected Date Range</h3>

<table>
    <tr>
        <th>Resource</th>
        <th>Event</th>
        <th>Start Time</th>
        <th>End Time</th>
    </tr>

    {% for b in bookings %}
    <tr>
        <td>{{ b.resource_name }}</td>
        <td>{{ b.title }}</td>
        <td>{{ b.start_time }}</td>
        <td>{{ b.end_time }}</td>
    </tr>
    {% endfor %}
</table>

{% endif %}


<br><br>
<a class="btn" href="/">â¬… Back to Home</a>

</body>
</html>
